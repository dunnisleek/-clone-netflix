<template>
  <div>

      <h1>Netflix Scroll</h1>
      <div class="wrapper">
        <section id="section1">
          <a href="#section3" class="arrow__btn">‹</a>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABZEK-7pZ1H5FD4cTyUb9qB_KeyJGz5p-kfPhCFv4GU_3mbdm8Xfsy4IBchlG9PFNdGff8cBNPaeMra72VFnot41nt0y3e8RLgaVwwh3UvyM2H2_MkmadWbQUeGuf811K7-cxJJh7gA.jpg"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABQCoK53qihwVPLRxPEDX98nyYpGbxgi5cc0ZOM4iHQu7KQvtgNyaNM5PsgI0vy5g3rLPZdjGCFr1EggrCPXpL77p2H08jV0tNEmIfs_e8KUfvBJ6Ay5nM4UM1dl-58xA6t1swmautOM.webp"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABdYtAqj8CyaJTWq5taD8Ro_UgwH3nne9QpFGVps-2J3IG-leqrfqXFii4jzZn48nPYTkrlwKQEV0R7_cEKlYBPRzdKqNODc-Oz26IL3LlLgFboXibIWXwxzeYxzuqn0I9TpARjeByw.jpg"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABbcCX42tsqGbBvO2y9CQv5-7QvYbCfoHtXsuc6NPCtZaKa4l4fBX3XWvUwG9F2A3CTsNpHVmulxBbdXKwK8Q6xGjejd9FoadGkZ7CnGrSl601TOQjzSHJ23NuIPC8j0QMGORL4uRIA.jpg"
            />
          </div>
          <a href="#section2" class="arrow__btn">›</a>
        </section>
        <section id="section2">
          <a href="#section1" class="arrow__btn">‹</a>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABVopDZ5Fy9_fk_HO5WxHTXKKjKhtWFupbSjuvPwfLK_vytzon4EwRUdGgYJ34JwPxOTK_NkV3aXfkULMB0Dcct-FyfqzH-X44VXuRMp4QeBHlvKwWeZFpZlGdItPzmmg4scmwhG7SQ.jpg"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/412e4119fb212e3ca9f1add558e2e7fed42f8fb4/AAAABTOj1-116yVcgKWMU2dI3GFR4x0fSkiGsqtLLeLUxRR7STaksjAqBTrYlTfrB8nIGnGvXksi0ewXAhVGg6-pLxpFOIfcpjK-pf8D5xehFZo5a6vJbo4L0AGbrzglbyUoq255QBJgRQ.jpg"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/a76057bcfd003711a76fb3985b1f2cf74beee3b8/AAAABd3IBDpxbRcHXvRMFCZeKa2aHLU1P4SJtrACMS9om3yhLjqPlvNlmR_fypPxjtbsbnKaC4JZhPSpDG4r_kdxSHHAltWguMcCB-1Y1OShr2zWfUv7Whf_39fNH5ZJ3_0gxQrs0akmQjQz44_LT7jXH5LMZ7iMBAzac5IEj4m7Fn_5OWEGYnVsDsKG-QTommDooULMDF9bEw.jpg"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/a76057bcfd003711a76fb3985b1f2cf74beee3b8/AAAABXSd7bhDddcwkq9XpksoQFCHVx29Sxl_h4hb2n3F2GIt32a4XWcOnctQfgnT5qdolv8UML6_xNB5CJ89h56wueb13mYmEBr0sx5e9iLPdtVcOQAOmKXKWHHXwFvJuCUwuNnL3s8eAQwqLXPVMHMEsujM684rUGrZNF2btN2GRy5-RyEslsxZO93V2Q_H2bWs8A8oayt1h5M.webp"
            />
          </div>
          <div class="item">
            <img
              src="https://occ-0-243-299.1.nflxso.net/dnm/api/v5/rendition/a76057bcfd003711a76fb3985b1f2cf74beee3b8/AAAABbXWODpAWqVXcmmjMA7K-2mPkQpvwCLfSdeyhVXzR8A3MSpdSEnnjf4HEJJTYC-TnktU6njTUGAxmzWEYCaJbk4v_ZeL-7QGzmkvYBjg_N-evr2XmcX-Fanoyvu_nimFP4iigPe4O3Vr_WcgplhwkDrJwPUJa84wRLrNAx3TufN5V7cWRP4indqu5HQahvgFEqfL9zjp4g.jpg"
            />
          </div>
          <a href="#section3" class="arrow__btn">›</a>
        </section>
        <section id="section3"></section>
      </div>
 
  </div>
</template>

<script setup>
</script>

<style scoped>
html{
       scroll-behavior: smooth;
}
body{
      margin:0;
}
h1{
       font-size:60px;
       text-align: center;
}
.wrapper{
  display:grid;
  grid-template-columns: repeat(2, 100%);
  overflow: hidden;
  scroll-behavior: smooth;
}
.wrapper section{
       width:100%;
       position:relative;
       display: grid;
       grid-template-columns: repeat(5, auto);
       margin:10px 0px;
     
}
.wrapper section .item{
 transition: 250ms all;
}
.wrapper section .item:hover{
       transform: scale(1.2);
}
.wrapper section a{
       position: absolute;
       text-decoration: none;
       font-size: 6rem;
       padding:20px;
       background: black;
       z-index: 1;
}
.wrapper section a:nth-of-type(1){
       top:0;
       left:0;
      bottom: 0;
       background: linear-gradient(-90deg, rgba(0, 0, 0, 0) 0%, black 100%);
}
.wrapper section a:nth-of-type(2){
       top:0;
       right:0;
      bottom: 0;
       background: linear-gradient(-90deg, rgba(0, 0, 0, 0) 0%, black 100%);
}
</style>
<script setup lang="ts">
//SEO
useSeoMeta({
  title: 'dunni Amazing Site',
  ogTitle: 'dunni Amazing Site',
  description: 'This is my amazing site, let me tell you all about it.',
  ogDescription: 'This is my amazing site, let me tell you all about it.',
  ogImage: 'https://example.com/image.png',
  twitterCard: 'summary_large_image',
})
//end of SEO

import { ref, computed, onMounted } from "vue";
import movies from "../store/movies.json";

//for the hamburger menu
const showNavigation = ref(false);

// Fetch movie data from the API
const mov = movies;

// Select the first movie from the movies array to display in the banner
const currentMovie = movies[2] || {};


const currentIndex = ref(0);
const currentTrendIndex = ref(0);
const searchQuery = ref('') // Data property to store the search query
const visibleMovies = computed(() => {
  const filteredMovies = movies.filter(movie =>
    movie.Title.toLowerCase().includes(searchQuery.value.toLowerCase())
  );

  const visibleCount = 6;
  const start = currentIndex.value;
  const end = start + visibleCount;

  if (end <= filteredMovies.length) {
    return filteredMovies.slice(start, end);
  } else {
    return [
      ...filteredMovies.slice(start, filteredMovies.length),
      ...filteredMovies.slice(0, end % filteredMovies.length)
    ];
  }
});

// const prevSlide = () => {
//   const visibleCount = 6;
//   const totalMovies = movies.length;

//   if (currentIndex.value - visibleCount < 0) {
//     currentIndex.value = totalMovies - (totalMovies % visibleCount);
//   } else {
//     currentIndex.value -= visibleCount;
//   }
// };

// const nextSlide = () => {
//   const visibleCount = 6;
//   const totalMovies = movies.length;

//   if (currentIndex.value + visibleCount >= totalMovies) {
//     currentIndex.value = 0;
//   } else {
//     currentIndex.value += visibleCount;
//   }
// };

// Adjust the visibleMovies to handle wrapping logic.
// const visibleMovies = computed(() => {
//   // Filter movies based on search query
//   const filteredMovies = movies.filter(movie =>
//     movie.Title.toLowerCase().includes(searchQuery.value.toLowerCase())
//   );
  
//   const visibleCount = 6;
//   const totalMovies = filteredMovies.length;

  // Wrap around logic
//   let start = currentIndex.value;
//   let end = start + visibleCount;

//   if (end <= totalMovies) {
//     return filteredMovies.slice(start, end);
//   } else {
//     return [
//       ...filteredMovies.slice(start, totalMovies),
//       ...filteredMovies.slice(0, end % totalMovies)
//     ];
//   }
// });

// const prevSlide = () => {
//   if (currentIndex.value > 0) {
//     currentIndex.value -= 1;
//   } else {
//     currentIndex.value = movies.length - 1;
//   }
// };

// const nextSlide = () => {
//   if (currentIndex.value < movies.length - 1) {
//     currentIndex.value += 1;
//   } else {
//     currentIndex.value = 0;
//   }
// };

//TRENDING // Functions for navigating through movies and trending movies
// Adjust the visibleMovies to handle wrapping logic.



// Adjust the visibleTrend to handle wrapping logic.
const visibleTrend = computed(() => {
  const filteredMovies = movies.filter(movie =>
    movie.Title.toLowerCase().includes(searchQuery.value.toLowerCase())
  );
  
  const visibleCount = 6;
  const totalMovies = filteredMovies.length;

  // Wrap around logic
  let start = currentTrendIndex.value;
  let end = start + visibleCount;

  if (end <= totalMovies) {
    return filteredMovies.slice(start, end);
  } else {
    return [
      ...filteredMovies.slice(start, totalMovies),
      ...filteredMovies.slice(0, end % totalMovies)
    ];
  }
});

const nextTrendSlide = () => {
  if (currentTrendIndex.value < movies.length - 1) {
    currentTrendIndex.value++;
  } else {
    currentTrendIndex.value = 0;
  }
};

const prevView = () => {
  if (currentTrendIndex.value > 0) {
    currentTrendIndex.value--;
  } else {
    currentTrendIndex.value = movies.length - 1;
  }
};

const toggleNavigation = () => {
  showNavigation.value = !showNavigation.value;
};
const closeNav = () => {
  showNavigation.value = false;
};
</script>





